# 쿠키 (Cookie)

- 쿠키는 브라우저에 저장되는 작은 문자열이다.
- 쿠키 하나당 4kb 까지 저장 가능하며, 브라우저마다 다르지만 20여개 정도 저장 가능하다.

## 쿠키의 사용

### 서버

### 서버 - 쿠키 읽기

HTTP 요청 헤더에 `Cookie` 를 통해 브라우저에 설정된 쿠키 값을 읽을 수 있다.

### 서버 - 쿠키 쓰기

서버가 HTTP 응답 헤더에 `Set-Coookie` 를 통해 쿠키를 전달할 수 있다.

그 `Set-Coookie` 헤더가 설정된 응답을 받은 브라우저는 해당 문자열을 브라우저 쿠키에 저장한다.

### 브라우저

`document.cookie` 를 통해 브라우저에 있는 쿠키를 읽고 쓸 수 있다. (단, HTTPOnly 옵션이 있으면 불가능)

#### 브라우저 - 쿠키 읽기

```js
console.log(document.cookie);
```

#### 브라우저 - 쿠키 쓰기

```js
document.cookie = 'name=foo';
```

### 주요 옵션

#### path

설정시 해당 경로의 하위 경로에서만 쿠키에 접근 가능하다.

#### domain

쿠키에 접근가능한 도메인을 지정할 수 있다.

#### expires

쿠키의 만료일을 지정할 수 있다. 해당 날짜가 지나면 쿠키는 삭제된다.

#### max-age

쿠키의 만료 기간을 지정할 수 있다. 해당 기간이 지나면 쿠키는 삭제된다.

#### secure

HTTPS 프로토콜을 사용할 때만 쿠키가 함께 전송되도록 한다.

#### httpOnly

HTTP 요청에만 쿠키가 실리도록 한다. 즉 `document.cookie` 로 쿠키에 접근할 수 없도록 한다.

#### samesite

서로 다른 도메인간 쿠키 전송여부에 대한 설정이다. 사이트간 요청 위조 (XSRF) 를 방지하기 위한 옵션이다.

**samesite=none**

모두 쿠키가 전송된다.

**samesite=strict**

서로 다른 도메인에서는 쿠키가 전송되지 않음

**samesite=lax**

일부 예외 경우을 제외하고 서로 다른 도메인에서 쿠키가 전송되지 않음

> 예외: GET, a href, link href
