
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <link rel="stylesheet" href="/dev-blog/highlight/default.min.css">
  </head>
  <body>
    <article>
      <h1>Color Picker 만들기 (with Canvas)</h1>
<p>canvas 로 Color Picker 를 만들면서 정리한 글이다.
Color Picker 는 아래와 같이 색상을 선택할 수 있는 도구이다.</p>
<ul>
<li>
<p>구글 Color Picker</p>
<img src="./assets/color-picker.png" width="400px">
</li>
</ul>
<h2>브라우저 기본 Color Picker</h2>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"color"</span>></span></code></pre>
<p>최신 브라우저에서는 기본으로 Color Picker 를 지원한다. input 의 type 에 "color" 를 사용해서 생성할 수 있지만 브라우저 마다 표시되는 UI가 다르다. - <a href="https://caniuse.com/mdn-html_elements_input_input-color">브라우저 지원율 참고: Can I Use</a></p>
<h2>Color Picker 구성 요소</h2>
<p>Color Picker 는 <a href="https://ko.wikipedia.org/wiki/HSV_%EC%83%89_%EA%B3%B5%EA%B0%84">HSV 색 공간</a>을 통해 색상을 설정할 수 있도록 한다.</p>
<h2>Hue Slider 구현</h2>
<h3>Color Palette</h3>
<img src="./assets/color-palette.png" width="400px">
<ul>
<li>
<p>Color Slider 에 선택된 색을 기반으로 Saturation (채도), Value (명도) 를 조정한다.</p>
</li>
<li>
<p>Hue Slider</p>
<ul>
<li>Hue (색상) 을 선택하는 기능을 한다.</li>
<li>Hue Slider 에 선택된 색상으로 Color Palette 의 색상이 결정된다.</li>
</ul>
</li>
</ul>
<h2>Color Palette</h2>
<p>먼저 Saturation(채도) 과 Value(명도) 를 선택할 수 있는 파레트를 캔버스에 그려본다.</p>
<p>canvas 에 색상 그레이디언트를 그리기 위해서는 createLinearGradient로 생성한 그레디언트 객체에 addColorStep 으로 그레디언트를 설정 할 수 있다.</p>
<ul>
<li>createLinearGradient (x0, y0, x1, y1);
<ul>
<li>x0: 그</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js"></code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">drawColorPalette</span> (ctx, color) {
  <span class="hljs-keyword">const</span> {width, height} = ctx.<span class="hljs-property">canvas</span>;

  <span class="hljs-comment">// 선택된 색으로 캔버스를 칠한다.</span>
  ctx.<span class="hljs-property">fillStyle</span> = color;
  ctx.<span class="hljs-title hljs-function">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);

  <span class="hljs-comment">// 그 위에, v</span>
  <span class="hljs-keyword">const</span> saturationGradient = ctx.<span class="hljs-title hljs-function">createLinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);
  saturationGradient.<span class="hljs-title hljs-function">addColorStop</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"rgba(255,255,255,1)"</span>);
  saturationGradient.<span class="hljs-title hljs-function">addColorStop</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"rgba(255,255,255,0)"</span>);

  ctx.<span class="hljs-property">fillStyle</span> = saturationGradient;
  ctx.<span class="hljs-title hljs-function">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);

  <span class="hljs-keyword">const</span> valueGradient = ctx.<span class="hljs-title hljs-function">createLinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, height);
  valueGradient.<span class="hljs-title hljs-function">addColorStop</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"rgba(0,0,0,0)"</span>);
  valueGradient.<span class="hljs-title hljs-function">addColorStop</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"rgba(0,0,0,1)"</span>);
  ctx.<span class="hljs-property">fillStyle</span> = valueGradient;
  ctx.<span class="hljs-title hljs-function">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);
}

<span class="hljs-keyword">const</span> palette = <span class="hljs-variable hljs-language">document</span>.<span class="hljs-title hljs-function">getElementById</span>(<span class="hljs-string">'palette'</span>);
<span class="hljs-keyword">const</span> paletteCtx = palette.<span class="hljs-title hljs-function">getContext</span>(<span class="hljs-string">'2d'</span>);

<span class="hljs-title hljs-function">drawColorPalette</span>(paletteCtx, <span class="hljs-string">'rgb(255, 0, 0)'</span>);</code></pre>

    </article>
  </body>
</html>
